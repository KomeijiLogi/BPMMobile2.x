<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="stylesheet" href="../../../../Content/mui.min.css" />
    <link rel="stylesheet" href="../../../../Content/mui.picker.min.css" />
    <link rel="stylesheet" href="../../../../Content/mui.poppicker.css" />
    <link rel="stylesheet" href="../../../../Content/mui.indexedlist.css" />
    <link rel="stylesheet" href="../../../../Content/upload.css" />
    <link rel="stylesheet" href="../../../../Content/ApprovalUtils.css" />

    <title></title>
    <meta charset="utf-8" />
</head>
<body>
    <div class="mui-content" style="background-color:white;z-index:2;" id="wrapper">
        <form class="mui-input-group" style="left:0rem;right:0rem;margin-bottom:1rem;padding-bottom:4rem;">
           
           <div class="mui-input-row">
               <label for="fno">员工编号</label>
               <input type="text" id="fno" name="fno" readonly="readonly"/>
           </div>
            <div class="mui-input-row">
                <label for="fname">员工姓名</label>
                <input type="text" id="fname" name="fname" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fdate">申请日期</label>
                <input type="date" id="fdate" name="fdate" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fdzlx_name">调转类型<i style="color:red;">*</i></label>
                <input type="text" id="fdzlx_name" name="fdzlx_name" readonly="readonly" placeholder="请选择调转类型" data-foper="" data-fdzlxno=""/>
            </div>
            <div class="mui-input-row">
                <label for="fiscw">是否财务</label>
                <input type="hidden" id="fiscw" name="fiscw" value="否"/>
                <div class="mui-switch mui-switch-blue" id="fiscwd">
                    <div class="mui-switch-handle"></div>
                </div>
            </div>
            <div class="mui-input-row itemtitle">
                <label>员工信息</label>
            </div>
            <div class="mui-input-row">
                <label for="fsex">性别</label>
                <input type="text" id="fsex" name="fsex" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fbirth">出生日期</label>
                <input type="text" id="fbirth" name="fbirth" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fidno">身份证号</label>
                <input type="text" id="fidno" name="fidno" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="ftel">联系方式</label>
                <input type="tel" id="ftel" name="ftel" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="frzdate">入职威高</label>
                <input type="date" id="frzdate" name="frzdate" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="frxdwdate">入调出公司</label>
                <input type="date" id="frxdwdate" name="frxdwdate" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fxl">最高学历</label>
                <input type="text" id="fxl" name="fxl" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fbxfs">保险缴纳</label>
                <input type="text" id="fbxfs" name="fbxfs" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fgzdate">工资发至<i style="color:red;">*</i></label>
                <input type="date" id="fgzdate" name="fgzdate" />
            </div>
            <div class="mui-input-row">
                <label for="fsbdate">社保交至<i style="color:red;">*</i></label>
                <input type="date" id="fsbdate" name="fsbdate"/>
            </div>
            <div class="mui-input-row">
                <label for="fjjr_name">交接人<i style="color:red;">*</i></label>
                <input type="text" id="fjjr_name" name="fjjr_name" readonly="readonly" data-fjjrno="" placeholder="请选择交接人"/>
            </div>
            <div class="mui-input-row">
                <label for="faddr">家庭住址</label>
                <input type="text" id="faddr" name="faddr" readonly="readonly"/>
            </div>
            <div class="mui-input-row itemtitle">
                <label>调转信息</label>
            </div>
            <div class="mui-input-row">
                <label for="fdc_jt_name">调出产业集团</label>
                <input type="text" id="fdc_jt_name" name="fdc_jt_name" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fdc_gs_name">调出公司</label>
                <input type="text" id="fdc_gs_name" name="fdc_gs_name" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fdc_bm_name">调出部门</label>
                <input type="text" id="fdc_bm_name" name="fdc_bm_name" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fyzw_name">原职位</label>
                <input type="text" id="fyzw_name" name="fyzw_name" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fyzwlevel">原职务层级</label>
                <input type="text" id="fyzwlevel" name="fyzwlevel" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fdcdate">调出日期<i style="color:red;">*</i></label>
                <input type="date" id="fdcdate" name="fdcdate" />
            </div>
            <div class="mui-input-row">
                <label for="fdc_gs_jlname">调出公司负责人<i style="color:red;">*</i></label>
                <input type="text" id="fdc_gs_jlname" name="fdc_gs_jlname" readonly="readonly" data-fdcgsjlno="" placeholder="请选择调出公司负责人"/>
            </div>
            <div class="mui-input-row" style="height:auto;">
                <label for="fdc_gs_lj">调出公司路径</label>
                <textarea id="fdc_gs_lj" name="fdc_gs_lj" readonly="readonly" rows="3"></textarea>
            </div>
            <div class="mui-input-row">
                <label for="fdr_jt_name">调入产业集团</label>
                <input type="text" id="fdr_jt_name" name="fdr_jt_name" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fdr_gs_name">调入公司</label>
                <input type="text" id="fdr_gs_name" name="fdr_gs_name" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fdr_bm_name">调入部门<i style="color:red;">*</i></label>
                <input type="text" id="fdr_bm_name" name="fdr_bm_name" readonly="readonly" placeholder="请选择调入部门" data-fdrbmno=""/>
            </div>
            <div class="mui-input-row">
                <label for="fnrzw_name">拟任职位<i style="color:red;">*</i></label>
                <input type="text" id="fnrzw_name" name="fnrzw_name" readonly="readonly" placeholder="请选择拟任职位" data-fnrzwno=""/>
            </div>
            <div class="mui-input-row">
                <label for="fnrzwlevel">拟任职务层级</label>
                <input type="text" id="fnrzwlevel" name="fnrzwlevel" readonly="readonly"/>
            </div>
            <div class="mui-input-row">
                <label for="fdrdate">调入日期<i style="color:red;">*</i></label>
                <input type="date" id="fdrdate" name="fdrdate" />
            </div>
            <div class="mui-input-row">
                <label for="fdr_gs_jlname">调入公司负责人</label>
                <input type="text" id="fdr_gs_jlname" name="fdr_gs_jlname" readonly="readonly" data-fdrgsjlno="" placeholder="请选择调入公司负责人"/>
            </div>
            <div class="mui-input-row">
                <label for="fdrbmfzrname">调入部门直接上级<i style="color:red;">*</i></label>
                <input type="text" id="fdrbmfzrname" name="fdrbmfzrname" readonly="readonly" data-fdrbmfzrno="" placeholder="请选择调入部门直接上级"/>
            </div>
            <div class="mui-input-row" style="height:auto;">
                <label for="fdr_gs_lj">调入公司路径</label>
                <textarea id="fdr_gs_lj" name="fdr_gs_lj" readonly="readonly" rows="3"></textarea>
            </div>
            <div class="mui-input-row">
                <label for="fworkplace">调入公司工作地点</label>
                <input type="text" id="fworkplace" name="fworkplace" placeholder="请填写调入公司工作地点"/>
            </div>
            <div class="mui-input-row itemtitle">
                <label>交接信息</label>
            </div>
            <div class="mui-card mui-input-group">
                <div class="mui-input-row itemtitle">
                    <label>公司任职部门</label>
                </div>
                <div class="mui-input-row">
                    <label for="fbm_1">1、经办工作</label>
                    <input type="text" id="fbm_1" name="fbm_1" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fbm_2">2、资料、文件</label>
                    <input type="text" id="fbm_2" name="fbm_2" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fbm_3">3、设备、仪器</label>
                    <input type="text" id="fbm_3" name="fbm_3" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fbm_4">4、其他交接事项</label>
                    <input type="text" id="fbm_4" name="fbm_4" placeholder="待填写交接结果" readonly="readonly" />
                </div>
            </div>
            <div class="mui-card mui-input-group">
                <div class="mui-input-row itemtitle">
                    <label>公司行政办公室</label>
                </div>
                <div class="mui-input-row">
                    <label for="fxz_1">1、领用办公用品</label>
                    <input type="text" id="fxz_1" name="fxz_1" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fxz_2">2、桌、椅、锁等用品</label>
                    <input type="text" id="fxz_2" name="fxz_2" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fxz_3">3、印章、公司相关证件</label>
                    <input type="text" id="fxz_3" name="fxz_3" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fxz_4">4、其他交接事项</label>
                    <input type="text" id="fxz_4" name="fxz_4" placeholder="待填写交接结果" readonly="readonly" />
                </div>
            </div>
            <div class="mui-card mui-input-group">
                <div class="mui-input-row itemtitle">
                    <label>信息化推进部</label>
                </div>
                <div class="mui-input-row">
                    <label for="fxx_1">1、企业邮箱变更</label>
                    <input type="text" id="fxx_1" name="fxx_1" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fxx_2">2、ERP用户变更</label>
                    <input type="text" id="fxx_2" name="fxx_2" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fxx_3">3、云办公账号变更</label>
                    <input type="text" id="fxx_3" name="fxx_3" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fxx_4">4、BPM账号变更</label>
                    <input type="text" id="fxx_4" name="fxx_4" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fxx_5">5、IP地址填写</label>
                    <input type="text" id="fxx_5" name="fxx_5" placeholder="待填写交接结果" readonly="readonly" />
                </div>
            </div>
            <div class="mui-card mui-input-group">
                <div class="mui-input-row itemtitle">
                    <label>公司财务部</label>
                </div>
                <div class="mui-input-row">
                    <label for="fcw_1">1、欠款货款、担保责任结清</label>
                    <input type="text" id="fcw_1" name="fcw_1" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fcw_2">2、服装扣款、费用报销处理</label>
                    <input type="text" id="fcw_2" name="fcw_2" placeholder="待填写交接结果" readonly="readonly" />
                </div>
            </div>
            <div class="mui-card mui-input-group">
                <div class="mui-input-row itemtitle">
                    <label>公司人力资源部</label>
                </div>
                <div class="mui-input-row">
                    <label for="frl_1">1、工资发放情况</label>
                    <input type="text" id="frl_1" name="frl_1" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="frl_2">2、社保缴纳情况</label>
                    <input type="text" id="frl_2" name="frl_2" placeholder="待填写交接结果" readonly="readonly" />
                </div>
            </div>
            <div class="mui-card mui-input-group">
                <div class="mui-input-row itemtitle">
                    <label>后勤服务总公司</label>
                </div>
                <div class="mui-input-row">
                    <label for="fhq_1">1、宿舍交接、公司住房</label>
                    <input type="text" id="fhq_1" name="fhq_1" placeholder="待填写交接结果" readonly="readonly" />
                </div>
                <div class="mui-input-row">
                    <label for="fhq_2">2、饭卡出入证、车辆通行证</label>
                    <input type="text" id="fhq_2" name="fhq_2" placeholder="待填写交接结果" readonly="readonly" />
                </div>
               
            </div>
        </form>
        <div class="mui-btn-row" id="SaveD">
            <button class="mui-btn mui-btn-primary" type="button" id="commitbt" onclick="Save()">提交</button>
        </div>
    </div>

    <input type="hidden" id="fdzlx_no" name="fdzlx_no" value=""/>
    <input type="hidden" id="fdc_gs_bmlx" name="fdc_gs_bmlx" value=""/>
    <input type="hidden" id="fdr_gs_bmlx" name="fdr_gs_bmlx" value=""/>
    <input type="hidden" id="foper" name="foper" value=""/>
    <input type="hidden" id="fdr_bm_no" name="fdr_bm_no" value=""/>
    <input type="hidden" id="fnrzw_no" name="fnrzw_no" value=""/>

    <script type="text/javascript" src="../../../../Scripts/baidu-statistics.js"></script>
    <script type="text/javascript" src="../../../../Scripts/zepto.min.js"></script>
    <script type="text/javascript" src="../../../../Scripts/mui.js"></script>
    <!--<script src="http://yun.kingdee.com/res/js/qingjs.js"></script>-->
    <script type="text/javascript" src="http://wb.weigaoholding.com:8090/res/js/qingjs.js"></script>
    <script type="text/javascript" src="../../../../Scripts/mui.poppicker.js"></script>
    <script type="text/javascript" src="../../../../Scripts/mui.picker.min.js"></script>
    <script type="text/javascript" src="../../../../Scripts/mui.indexedlist.js"></script>
    <script type="text/javascript" src="../../../../Scripts/ApprovalUtils.js"></script>
    <script type="text/javascript" src="../../../../Scripts/util.js"></script>
    <script type="text/javascript" src="../../../../Scripts/upload.js"></script>
    <script type="text/javascript" src="../../../../Scripts/upload.detail.js"></script>
    <script>
        mui.init();

        mui.ready(function () {

            getVersion('\\01威高集团总部\\01跨产业集团\\RL人力', '集团公司员工内部调转申请(行管及辅岗)');
            getBPMParam();
            prepMsg();
           
        });
        mui('#fiscwd').each(function () {

            this.addEventListener('toggle', function (event) {
                if (event.detail.isActive == 'true' || event.detail.isActive == true) {
                    $('#fiscw').val('是');
                } else {
                    $('#fiscw').val('否');
                }

            });
        });

        XuntongJSBridge.call('setWebViewTitle', { 'title': '发起流程' });
        XuntongJSBridge.call('getPersonInfo', {}, function (result) {
            if (typeof (result) == "string") {
                result = JSON.parse(result);
            }

            if (result.success == true || result.success == "true") {
                $("#fname").val(result.data.name);

            }
        });

        XuntongJSBridge.call('createPop', {
            'popTitle': '',
            'popTitleCallBackId': '1',
            'items': [{ 'text': '刷新', 'callBackId': 'callback1' }],
            'menuList': [
                'openWithBrowser'
            ],

        }, function (result) {
            if (result.success == true || result.success == 'true') {
                var callBackId = result.data ? result.data.callBackId : '';
                if (callBackId == 'callback1') {
                    window.location.reload();
                    //location.reload();
                } else if (callBackId == 'callback2') {

                } else {

                }
            }

        });

        function prepMsg() {

            $("#fdate").val(getNowFormatDate(2));
            tapEvent();
            var xml = '<?xml version= "1.0" ?>';
            xml = xml + ' <Requests>';
            xml = xml + '      <Params>';
            xml = xml + '     <Method>GetFormPostData</Method>';
            xml = xml + '     <ProcessName>集团公司员工内部调转申请(行管及辅岗)</ProcessName>';
            xml = xml + '    <ProcessVersion>1.2</ProcessVersion>';
            xml = xml + '       <Owner></Owner>';
            xml = xml + '     </Params>';         
            xml = xml + '     </Requests>';
            var initHeaderAjax = $.ajax({
                type: "POST",
                url: "/api/bpm/DataProvider",
                data: { '': xml },

                beforeSend: function (XHR) {
                    XHR.setRequestHeader('Authorization', 'Basic ' + localStorage.getItem('ticket'));
                }
            }).done(function (data) {
                var provideData = JSON.parse(unescape(data.replace(/\\(u[0-9a-fA-F]{4})/gm, '%$1')));
                console.log(provideData);
                var item = provideData.Tables[0].Rows[0];
                $("#fno").val(item.fno);
                $("#fname").val(item.fname);

            }).fail(function (e) {

            });
            initHeaderAjax.then(function (data) {
                var fno = $("#fno").val();
                var xml = '<?xml version= "1.0" ?>';
                xml = xml + '      <Requests>';
                xml = xml + '     <Params>';
                xml = xml + '         <DataSource>PS</DataSource>';
                xml = xml + '         <ID>erpcloud_公用_获取个人信息</ID>';
                xml = xml + '         <Type>1</Type>';
                xml = xml + '        <Method>GetUserDataProcedure</Method>';
                xml = xml + '        <ProcedureName>erpcloud_公用_获取个人信息</ProcedureName>';
                xml = xml + '        <Filter>';
                xml = xml + '            <fno>' + fno + '</fno>';
                xml = xml + '        </Filter>';
                xml = xml + '      </Params>';
                xml = xml + '   </Requests>';
                var initMainMsg = $.ajax({
                    type: "POST",
                    url: "/api/bpm/DataProvider",
                    data: { '': xml },

                    beforeSend: function (XHR) {
                        XHR.setRequestHeader('Authorization', 'Basic ' + localStorage.getItem('ticket'));
                    }
                }).done(function (data) {

                    var provideData = JSON.parse(unescape(data.replace(/\\(u[0-9a-fA-F]{4})/gm, '%$1')));
                    console.log(provideData);
                    var personInfoObject = provideData.Tables[0].Rows[0];

                    if (personInfoObject.SEX == 'M') {
                        $("#fsex").val('男');
                    } else {
                        $("#fsex").val('女');
                    }
                    var birth_year = personInfoObject.BIRTHDATE.year;
                    var birth_month = personInfoObject.BIRTHDATE.month;
                    var birth_day = personInfoObject.BIRTHDATE.day;
                    $("#fbirth").val(FormatterTime_Y_M_S(birth_year, birth_month, birth_day));
                    $("#fidno").val(personInfoObject.NATIONAL_ID);
                    $("#ftel").val(personInfoObject.PHONE);
                    $("#frzdate").val(personInfoObject.HPS_JOINWG_DT);
                    var rxdw_year = personInfoObject.HPS_COMP_ENTRY_DT.year;
                    var rxdw_month = personInfoObject.HPS_COMP_ENTRY_DT.month;
                    var rxdw_day = personInfoObject.HPS_COMP_ENTRY_DT.day;
                    $("#frxdwdate").val(FormatterTime_Y_M_S(rxdw_year, rxdw_month, rxdw_day));
                    $("#fxl").val(personInfoObject.JPM_DESCR90);
                    $("#fbxfs").val(personInfoObject.DESCR5);
                    $("#faddr").val(personInfoObject.HPS_VALUE03);
                    $("#fdc_jt_name").val(personInfoObject.fssgroup);
                    $("#fdc_gs_name").val(personInfoObject.fsscompany);
                    $("#fdc_bm_name").val(personInfoObject.fdeptname);
                    $("#fyzw_name").val(personInfoObject.zhiwei);
                    $("#fyzwlevel").val(personInfoObject.fzwlevel);
                    $("#fdc_gs_jlname").val(personInfoObject.FZR);
                    document.getElementById('fdc_gs_jlname').dataset.fdcgsjlno = personInfoObject.FZRNUMBER;
                    $("#fdc_gs_lj").val(personInfoObject.DESCR254);
                }).fail(function (e) {
                    
                });
            });
        }

        function tapEvent() {

            var fdzlxdata = [
                {
                    no:'01',
                    value: 'XFR',
                    text: '部门内调动'
                } ,
                {
                    no:'02',
                    value: 'XFR',
                    text: '跨部门调动'
                },
                {
                    no:'03',
                    value: 'XFR',
                    text: '部门内轮岗'
                },
                {
                    no:'04',
                    value: 'XFR',
                    text: '跨部门轮岗'
                },
                {
                    no: '03',
                    value: 'P05',
                    text: '跨公司轮岗'
                },
                {
                    no: '01',
                    value: 'P05',
                    text: '产业集团内调动'
                },
                {
                    no: '02',
                    value: 'P05',
                    text: '跨产业集团调动'
                }

            ];

            var element = document.getElementById('fdzlx_name');

            var picker = new mui.PopPicker();

            picker.setData(fdzlxdata);

            element.addEventListener('tap', function () {

                picker.show(function (items) {

                    element.value = items[0].text;
                    element.dataset.foper = items[0].value;
                    element.dataset.fdzlxno = items[0].no;

                });

            }, false);
            //交接人信息
            $('#fjjr_name').on('tap', function () {
                XuntongJSBridge.call('selectPerson', { 'pType': '1' }, function (result) {

                    if (typeof (result) == "string") {
                        result = JSON.parse(result);
                    }
                    var openIdArr = new Array();
                    if (result.success == true || result.success == "true") {
                        for (var i = 0; i < result.data.persons.length; i++) {

                            openIdArr.push(result.data.persons[i].openId);

                        }
                        $.ajax({
                            type: "POST",
                            url: "/api/bpm/PostAccount",
                            data: { "ids": openIdArr },
                            beforeSend: function (XHR) {
                                XHR.setRequestHeader('Authorization', 'Basic ' + localStorage.getItem('ticket'));
                            }
                        }).done(function (data) {

                            var accounts = new Array();
                            var names = new Array();
                            for (var i = 0; i < data.data.length; i++) {
                                accounts.push((String)(data.data[i].phone));
                                names.push(data.data[i].name);
                            }
                            var fjjr_name = document.getElementById('fjjr_name');
                            $("#fjjr_name").val(names[0]);
                            fjjr_name.dataset.fjjrno = accounts[0];
                        }).fail(function (e) {

                        });
                    }
                });
            });

            //获取部门相关信息
            $("#fdr_bm_name").on('tap', function () {
                XuntongJSBridge.call('selectDepts',
                    { 'isMulti': 'false', 'blacklist': [''], 'whitelist': ['']},
                    function (result) {
                        if (typeof (result) == "string") {
                            result = JSON.parse(result);
                        }
                       //alert(JSON.stringify(result));
                        var orgIdArr = new Array();
                        if (result.success == true || result.success == "true") {
                            for (var i = 0; i < result.data.persons.length; i++){
                                orgIdArr.push(result.data.persons[i].orgId);
                            }
                            $.ajax({
                                type: "POST",
                                url: "/api/bpm/PostAccount",
                                data: { "ids": orgIdArr },
                                beforeSend: function (XHR) {
                                    XHR.setRequestHeader('Authorization', 'Basic ' + localStorage.getItem('ticket'));
                                }
                            }).done(function (data) {
                                //alert(JSON.stringify(data));
                               
                            }).fail(function (e) {

                            });
                        }
                    }
                )

            });
            //调入公司经理信息
            $("#fdr_gs_jlname").on('tap', function () {

                XuntongJSBridge.call('selectPerson', { 'pType': '1' }, function (result) {

                    if (typeof (result) == "string") {
                        result = JSON.parse(result);
                    }
                    var openIdArr = new Array();
                    if (result.success == true || result.success == "true") {
                        for (var i = 0; i < result.data.persons.length; i++) {

                            openIdArr.push(result.data.persons[i].openId);

                        }
                        $.ajax({
                            type: "POST",
                            url: "/api/bpm/PostAccount",
                            data: { "ids": openIdArr },
                            beforeSend: function (XHR) {
                                XHR.setRequestHeader('Authorization', 'Basic ' + localStorage.getItem('ticket'));
                            }
                        }).done(function (data) {

                            var accounts = new Array();
                            var names = new Array();
                            for (var i = 0; i < data.data.length; i++) {
                                accounts.push((String)(data.data[i].phone));
                                names.push(data.data[i].name);
                            }
                            var fdr_gs_jlname = document.getElementById('fdr_gs_jlname');
                            $("#fdr_gs_jlname").val(names[0]);
                            fdr_gs_jlname.dataset.fdrgsjlname = accounts[0];

                        }).fail(function (e) {

                        });
                    }
                });

            });

            //调入部门直接上级信息
            $("#fdrbmfzrname").on('tap', function () {

                XuntongJSBridge.call('selectPerson', { 'pType': '1' }, function (result) {

                    if (typeof (result) == "string") {
                        result = JSON.parse(result);
                    }
                    var openIdArr = new Array();
                    if (result.success == true || result.success == "true") {
                        for (var i = 0; i < result.data.persons.length; i++) {

                            openIdArr.push(result.data.persons[i].openId);

                        }
                        $.ajax({
                            type: "POST",
                            url: "/api/bpm/PostAccount",
                            data: { "ids": openIdArr },
                            beforeSend: function (XHR) {
                                XHR.setRequestHeader('Authorization', 'Basic ' + localStorage.getItem('ticket'));
                            }
                        }).done(function (data) {

                            var accounts = new Array();
                            var names = new Array();
                            for (var i = 0; i < data.data.length; i++) {
                                accounts.push((String)(data.data[i].phone));
                                names.push(data.data[i].name);
                            }
                            var fdrbmfzrname = document.getElementById('fdrbmfzrname');
                            $("#fdrbmfzrname").val(names[0]);
                            fdrbmfzrname.dataset.fdrbmfzrno = accounts[0];
                        }).fail(function (e) {

                        });
                    }
                });
            });


        }
    </script>
</body>
</html>